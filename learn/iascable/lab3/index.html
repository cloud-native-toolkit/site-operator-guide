<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="The TechZone Automation Toolkit is an open-source collection of assets that enable application development and support teams to deliver business value quickly using Red Hat OpenShift or Kubernetes"><meta name=author content="TechZone Automation development team"><link href=https://operate.cloudnativetoolkit.dev/learn/iascable/lab3/ rel=canonical><link rel=icon href=../../../images/cloudnativetoolkit.png><meta name=generator content="mkdocs-1.3.1, mkdocs-material-8.4.2"><title>Lab 3: GitOps - TechZone Automation: Operate</title><link rel=stylesheet href=../../../assets/stylesheets/main.69437709.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.cbb835fc.min.css><meta name=theme-color content=#000000><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,300i,400,400i,700,700i%7CIBM+Plex+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"IBM Plex Sans";--md-code-font:"IBM Plex Mono"}</style><link rel=stylesheet href=../../../css/extra.css><link rel=stylesheet href=../../../css/toolkit-code.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-153689700-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");ga("send","event","feedback","click",t,e),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){ga("send","pageview",e.pathname)})});var e=document.createElement("script");e.async=!0,e.src="https://www.google-analytics.com/analytics.js",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><!-- Determine title --><!-- The image needs to have an absolute URL --><!-- Open graph meta tags --><meta property=og:type content=website><meta property=og:title content="TechZone Automation: Operate - Lab 3: GitOps"><meta property=og:description content="The TechZone Automation Toolkit is an open-source collection of assets that enable application development and support teams to deliver business value quickly using Red Hat OpenShift or Kubernetes"><meta content=https://operate.cloudnativetoolkit.dev/learn/iascable/lab3/ property=og:url><meta property=og:image content=https://operate.cloudnativetoolkit.dev/assets/images/banner.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1080><meta property=og:image:height content=568></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=black data-md-color-accent> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#lab-3-use-technology-zone-accelerator-toolkit-and-iascable-to-setup-gitops-on-a-red-hat-openshift-cluster-in-a-virtual-private-cloud-on-ibm-cloud class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="TechZone Automation: Operate" class="md-header__button md-logo" aria-label="TechZone Automation: Operate" data-md-component=logo> <img src=../../../images/cloudnativetoolkit.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> TechZone Automation: Operate </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Lab 3: GitOps </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/cloud-native-toolkit/site-operator-guide title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <!-- Determine class according to configuration --> <!-- Main navigation --> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <!-- Site title --> <!--
  <label class="md-nav__title" for="__drawer">
    <a
      href="../../.."
      title="TechZone Automation: Operate"
      class="md-nav__button md-logo"
      aria-label="TechZone Automation: Operate"
      data-md-component="logo"
    >
      
  <img src="../../../images/cloudnativetoolkit.png" alt="logo">

    </a>
    TechZone Automation: Operate
  </label>
--> <!-- Repository information --> <div class=md-nav__source> <a href=https://github.com/cloud-native-toolkit/site-operator-guide title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> </div> </a> </div> <!-- Render item list --> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Getting Started <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Getting Started" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../getting-started/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../getting-started/setup/ class=md-nav__link> Setup </a> </li> <li class=md-nav__item> <a href=../../../getting-started/best-practices/ class=md-nav__link> Best practices </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Concepts <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Concepts data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../concepts/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../concepts/gitops/ class=md-nav__link> GitOps </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3 type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3> Toolkit Concepts <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Toolkit Concepts" data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Toolkit Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../concepts/module/ class=md-nav__link> Module </a> </li> <li class=md-nav__item> <a href=../../../concepts/bom/ class=md-nav__link> Bill of Materials </a> </li> <li class=md-nav__item> <a href=../../../concepts/variables/ class=md-nav__link> Properties </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> Tasks <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tasks data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Tasks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../tasks/overview/ class=md-nav__link> Overview </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> Tutorials <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tutorials data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../tutorials/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../tutorials/1-setup/ class=md-nav__link> Setup </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6> Reference <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Reference data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../reference/module/ class=md-nav__link> Module </a> </li> <li class=md-nav__item> <a href=../../../reference/bom/ class=md-nav__link> Bill of Material </a> </li> <li class=md-nav__item> <a href=../../../reference/glossary/ class=md-nav__link> Glossary </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7> Contribute <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Contribute data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Contribute </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../contribute/overview/ class=md-nav__link> Overview </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8 type=checkbox id=__nav_8 checked> <label class=md-nav__link for=__nav_8> Previous Layout (to be removed once incorporated into the new layout) <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Previous Layout (to be removed once incorporated into the new layout)" data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Previous Layout (to be removed once incorporated into the new layout) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../getting-started/ class=md-nav__link> Getting started </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8_2 type=checkbox id=__nav_8_2 checked> <label class=md-nav__link for=__nav_8_2> Learn <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Learn data-md-level=2> <label class=md-nav__title for=__nav_8_2> <span class="md-nav__icon md-icon"></span> Learn </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8_2_2 type=checkbox id=__nav_8_2_2 checked> <label class=md-nav__link for=__nav_8_2_2> Create <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Create data-md-level=3> <label class=md-nav__title for=__nav_8_2_2> <span class="md-nav__icon md-icon"></span> Create </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../lab1/ class=md-nav__link> Lab 1: The basics </a> </li> <li class=md-nav__item> <a href=../lab2/ class=md-nav__link> Lab 2: Infrastructure </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Lab 3: GitOps <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Lab 3: GitOps </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1-define-an-outline-of-the-target-architecture class=md-nav__link> 1. Define an outline of the target architecture </a> </li> <li class=md-nav__item> <a href=#2-identify-the-needed-technology-zone-accelerator-toolkit-terraform-modules-for-the-target-architecture class=md-nav__link> 2. Identify the needed Technology Zone Accelerator Toolkit Terraform modules for the target architecture </a> <nav class=md-nav aria-label="2. Identify the needed Technology Zone Accelerator Toolkit Terraform modules for the target architecture"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-configuration-of-gitops class=md-nav__link> 1. Configuration of GitOps </a> </li> <li class=md-nav__item> <a href=#2-cloud-infrastructureservices-resources-related class=md-nav__link> 2. Cloud infrastructure/services resources related </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3-write-a-customized-bom-to-combine-the-modules class=md-nav__link> 3. Write a customized BOM to combine the modules </a> <nav class=md-nav aria-label="3. Write a customized BOM to combine the modules"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#step-1-write-the-bill-of-material-bom-file class=md-nav__link> Step 1: Write the Bill of Material BOM file </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#4-use-iascable-to-create-the-scaffolding-for-a-terraform-project class=md-nav__link> 4. Use IasCable to create the scaffolding for a Terraform project </a> <nav class=md-nav aria-label="4. Use IasCable to create the scaffolding for a Terraform project"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#step-1-install-colima-container-engine-and-start-the-container-engine class=md-nav__link> Step 1: Install colima container engine and start the container engine </a> </li> <li class=md-nav__item> <a href=#step-2-create-a-terraform-project-based-on-bill-of-material-bom-file class=md-nav__link> Step 2: Create a terraform project based on Bill of Material BOM file </a> </li> <li class=md-nav__item> <a href=#step-3-copy-helper-bash-scripts-into-the-output-folder class=md-nav__link> Step 3: Copy helper bash scripts into the output folder </a> </li> <li class=md-nav__item> <a href=#step-4-start-the-tools-container-provided-by-the-iascable class=md-nav__link> Step 4: Start the tools container provided by the IasCable </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#5-use-the-iascable-tools-container-to-execute-the-terraform-modules class=md-nav__link> 5. Use the IasCable tools container to execute the Terraform modules </a> <nav class=md-nav aria-label="5. Use the IasCable tools container to execute the Terraform modules"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#step-1-inside-the-container-in-the-running-container-verify-the-mapped-resources class=md-nav__link> Step 1 (inside the container): In the running container verify the mapped resources </a> </li> <li class=md-nav__item> <a href=#step-2-inside-the-container-create-a-workspace-folder-in-your-container-and-copy-your-iascable-project-into-it class=md-nav__link> Step 2 (inside the container): Create a workspace folder in your container and copy your IasCable project into it </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#6-apply-the-terraform-modules-to-create-the-environment-in-ibm-cloud-and-backup-terraform-configuration class=md-nav__link> 6. Apply the Terraform modules to create the environment in IBM Cloud and backup Terraform configuration </a> <nav class=md-nav aria-label="6. Apply the Terraform modules to create the environment in IBM Cloud and backup Terraform configuration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#step-1-inside-the-container-execute-the-applysh-and-backup-the-result-into-the-mapped-volume class=md-nav__link> Step 1 (inside the container): Execute the apply.sh and backup the result into the mapped volume </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#7-destroy-the-environment-on-ibm-cloud class=md-nav__link> 7. Destroy the environment on IBM Cloud </a> <nav class=md-nav aria-label="7. Destroy the environment on IBM Cloud"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#step-1-inside-the-container-destroy-the-created-ibm-cloud-resources class=md-nav__link> Step 1 (inside the container): Destroy the created IBM Cloud resources </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#8-summary class=md-nav__link> 8. Summary </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../lab4/ class=md-nav__link> Lab 4: Develop GitOps module </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8_3 type=checkbox id=__nav_8_3> <label class=md-nav__link for=__nav_8_3> Apply <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Apply data-md-level=2> <label class=md-nav__title for=__nav_8_3> <span class="md-nav__icon md-icon"></span> Apply </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apply/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../apply/bill-of-material-reference/ class=md-nav__link> Bill of Material </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8_3_3 type=checkbox id=__nav_8_3_3> <label class=md-nav__link for=__nav_8_3_3> Multiple module catalogs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Multiple module catalogs" data-md-level=3> <label class=md-nav__title for=__nav_8_3_3> <span class="md-nav__icon md-icon"></span> Multiple module catalogs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apply/multi-catalog/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../apply/multi-catalog/iascable/ class=md-nav__link> Generating automation </a> </li> <li class=md-nav__item> <a href=../../../apply/multi-catalog/custom-catalog/ class=md-nav__link> Creating a catalog </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../apply/end-to-end-testing/ class=md-nav__link> End-To-End Testing </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8_4 type=checkbox id=__nav_8_4> <label class=md-nav__link for=__nav_8_4> Resources <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Resources data-md-level=2> <label class=md-nav__title for=__nav_8_4> <span class="md-nav__icon md-icon"></span> Resources </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../resources/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../resources/ascent/ class=md-nav__link> ASCENT </a> </li> <li class=md-nav__item> <a href=../../../resources/automation-bundles/ class=md-nav__link> Automation bundles </a> </li> <li class=md-nav__item> <a href=../../../resources/automation-runtimes/ class=md-nav__link> Automation Runtimes </a> </li> <li class=md-nav__item> <a href=../../../resources/troubleshooting/ class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=../../../resources/module-catalog/ class=md-nav__link> Module catalog </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1-define-an-outline-of-the-target-architecture class=md-nav__link> 1. Define an outline of the target architecture </a> </li> <li class=md-nav__item> <a href=#2-identify-the-needed-technology-zone-accelerator-toolkit-terraform-modules-for-the-target-architecture class=md-nav__link> 2. Identify the needed Technology Zone Accelerator Toolkit Terraform modules for the target architecture </a> <nav class=md-nav aria-label="2. Identify the needed Technology Zone Accelerator Toolkit Terraform modules for the target architecture"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-configuration-of-gitops class=md-nav__link> 1. Configuration of GitOps </a> </li> <li class=md-nav__item> <a href=#2-cloud-infrastructureservices-resources-related class=md-nav__link> 2. Cloud infrastructure/services resources related </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3-write-a-customized-bom-to-combine-the-modules class=md-nav__link> 3. Write a customized BOM to combine the modules </a> <nav class=md-nav aria-label="3. Write a customized BOM to combine the modules"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#step-1-write-the-bill-of-material-bom-file class=md-nav__link> Step 1: Write the Bill of Material BOM file </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#4-use-iascable-to-create-the-scaffolding-for-a-terraform-project class=md-nav__link> 4. Use IasCable to create the scaffolding for a Terraform project </a> <nav class=md-nav aria-label="4. Use IasCable to create the scaffolding for a Terraform project"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#step-1-install-colima-container-engine-and-start-the-container-engine class=md-nav__link> Step 1: Install colima container engine and start the container engine </a> </li> <li class=md-nav__item> <a href=#step-2-create-a-terraform-project-based-on-bill-of-material-bom-file class=md-nav__link> Step 2: Create a terraform project based on Bill of Material BOM file </a> </li> <li class=md-nav__item> <a href=#step-3-copy-helper-bash-scripts-into-the-output-folder class=md-nav__link> Step 3: Copy helper bash scripts into the output folder </a> </li> <li class=md-nav__item> <a href=#step-4-start-the-tools-container-provided-by-the-iascable class=md-nav__link> Step 4: Start the tools container provided by the IasCable </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#5-use-the-iascable-tools-container-to-execute-the-terraform-modules class=md-nav__link> 5. Use the IasCable tools container to execute the Terraform modules </a> <nav class=md-nav aria-label="5. Use the IasCable tools container to execute the Terraform modules"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#step-1-inside-the-container-in-the-running-container-verify-the-mapped-resources class=md-nav__link> Step 1 (inside the container): In the running container verify the mapped resources </a> </li> <li class=md-nav__item> <a href=#step-2-inside-the-container-create-a-workspace-folder-in-your-container-and-copy-your-iascable-project-into-it class=md-nav__link> Step 2 (inside the container): Create a workspace folder in your container and copy your IasCable project into it </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#6-apply-the-terraform-modules-to-create-the-environment-in-ibm-cloud-and-backup-terraform-configuration class=md-nav__link> 6. Apply the Terraform modules to create the environment in IBM Cloud and backup Terraform configuration </a> <nav class=md-nav aria-label="6. Apply the Terraform modules to create the environment in IBM Cloud and backup Terraform configuration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#step-1-inside-the-container-execute-the-applysh-and-backup-the-result-into-the-mapped-volume class=md-nav__link> Step 1 (inside the container): Execute the apply.sh and backup the result into the mapped volume </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#7-destroy-the-environment-on-ibm-cloud class=md-nav__link> 7. Destroy the environment on IBM Cloud </a> <nav class=md-nav aria-label="7. Destroy the environment on IBM Cloud"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#step-1-inside-the-container-destroy-the-created-ibm-cloud-resources class=md-nav__link> Step 1 (inside the container): Destroy the created IBM Cloud resources </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#8-summary class=md-nav__link> 8. Summary </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/cloud-native-toolkit/site-operator-guide/edit/main/docs/learn/iascable/lab3/index.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg> </a> <h1 id=lab-3-use-technology-zone-accelerator-toolkit-and-iascable-to-setup-gitops-on-a-red-hat-openshift-cluster-in-a-virtual-private-cloud-on-ibm-cloud>Lab 3: Use <code>Technology Zone Accelerator Toolkit</code> and <code>IasCable</code> to setup <code>GitOps</code> on a <code>Red Hat OpenShift Cluster</code> in a <code>Virtual Private Cloud</code> on <code>IBM Cloud</code><a class=headerlink href=#lab-3-use-technology-zone-accelerator-toolkit-and-iascable-to-setup-gitops-on-a-red-hat-openshift-cluster-in-a-virtual-private-cloud-on-ibm-cloud title="Permanent link">&para;</a></h1> <p>Our objective is to create a customized initial <a href=https://www.ibm.com/garage/method/practices/run/gitops/ >GitOps</a> setup in an <a href=https://cloud.ibm.com/login><code>IBM Cloud</code></a> environment.</p> <p>The <a href=https://github.com/cloud-native-toolkit/software-everywhere><code>Technology Zone Accelerator Toolkit</code></a> project and <a href=https://github.com/cloud-native-toolkit/iascable><code>IasCable</code></a> CLI do provide an awesome way to eliminate writing <a href=https://www.terraform.io/ ><code>Terraform</code></a> modules for various clouds such as <a href=https://cloud.ibm.com/login><code>IBM Cloud</code></a>, <a href=https://aws.amazon.com/ ><code>AWS</code></a> or <a href=https://azure.microsoft.com/ ><code>Azure</code></a> to create and configure resources. We are going to reuse Terraform modules which the <a href=https://modules.cloudnativetoolkit.dev/ ><code>Technology Zone Accelerator Toolkit</code> catalog</a> does provide.</p> <p>Surely, we need to know the needed outline for the cloud architecture which does depend on the cloud environment we are going to use.</p> <p>As I said the <a href=https://modules.cloudnativetoolkit.dev/ ><code>Technology Zone Accelerator Toolkit</code> catalog</a> does provide the reuse of existing Terraform modules, which we use by just combining by writing a <a href=https://github.com/cloud-native-toolkit/iascable>"<code>Bill of Material file</code>"</a> and configure the variables for the related Terraform modules (<a href=https://github.com/cloud-native-toolkit/terraform-gitops-cp-bas>example link to the GitOps Terraform module</a>) when it is needed.</p> <blockquote> <p>We <strong>will not write any Terraform code</strong>, we will only combine existing Terraform modules and configure them using <a href=https://github.com/cloud-native-toolkit/iascable>IasCable <code>BOM</code></a> files!</p> </blockquote> <p>In that scenario we will use <a href=https://cloud.ibm.com/login><code>IBM Cloud</code></a> with a <a href=https://www.ibm.com/cloud/learn/vpc><code>Virtual Private Cloud</code></a> and a <a href=https://www.ibm.com/cloud/openshift><code>Red Hat OpenShift cluster</code></a> with <a href=https://github.com/redhat-developer/gitops-operator><code>Argo CD installed</code></a> and integrated with a GitHub project.</p> <p>These are the major sections:</p> <ol> <li>Define an outline of the target architecture</li> <li>Identify the needed <code>Technology Zone Accelerator Toolkit</code> Terraform modules for the target architecture</li> <li>Write a customized <code>BOM</code> to combine the modules</li> <li>Use <code>IasCable</code> to create the scaffolding for a <code>Terraform</code> project</li> <li>Use the <a href="https://quay.io/repository/cloudnativetoolkit/cli-tools?tab=tags"><code>IasCable</code> tools container</a> to execute the <code>Terraform</code> modules<blockquote> <p>Note: Depending on the <em><a href=https://github.com/abiosoft/colima>container engine</a></em> you are going to use on your computer, you maybe have to copy the <code>Terraform</code> project inside the running tools container, because of access right restrictions to access mapped local volumes to the running containers. That is the reason why I wrote some helper scripts to simplify the copy and deletion of the Terraform code mapped to the local volume of our computer. You can find the in the current helper bash automation script in the <a href=https://github.com/thomassuedbroecker/iascable-vpc-openshift-argocd/tree/main/example>GitHub project</a>. <code>IasCable</code> does suggest to use <a href=https://www.docker.com/ >Docker</a> or <a href=https://github.com/abiosoft/colima>Colima</a> </p> </blockquote> </li> <li>Apply the Terraform modules to create the environment in IBM Cloud and backup the <a href=https://www.terraform.io/language/state>Terraform state</a> to the local computer.</li> <li>Destroy the environment on IBM Cloud.</li> <li>Summary</li> </ol> <p>You can the access source code in the <a href=https://github.com/thomassuedbroecker/iascable-vpc-openshift-argocd>GitHub project</a> I created. The project is under <a href=https://github.com/thomassuedbroecker/iascable-vpc-openshift-argocd/blob/main/LICENSE><code>Apache-2.0 license</code></a>.</p> <div class=highlight><pre><span></span><code>git clone https://github.com/thomassuedbroecker/iascable-vpc-openshift-argocd.git
<span class=nb>cd</span> example
</code></pre></div> <h2 id=1-define-an-outline-of-the-target-architecture>1. Define an outline of the target architecture<a class=headerlink href=#1-define-an-outline-of-the-target-architecture title="Permanent link">&para;</a></h2> <p>This is our simplified target architecture for our objective to create a customized setup in an IBM Cloud environment for GitOps.</p> <ul> <li>Configuration of <code>GitOps</code> in <code>Red Hat OpenShift</code></li> </ul> <p>We will use two operators: * <a href=https://github.com/redhat-developer/gitops-operator>Red at OpenShift GitOps operator</a></p> <div class=highlight><pre><span></span><code>* We will create one [ArgoCD instance](https://argo-cd.readthedocs.io/en/stable/) with the [Red at OpenShift GitOps operator](https://github.com/redhat-developer/gitops-operator), that [ArgoCD instance](https://argo-cd.readthedocs.io/en/stable/) will bin initial configured by a newly created GitHub project configure by a [Cloud Native Toolkit template](https://github.com/cloud-native-toolkit/terraform-tools-gitops/tree/main/template) for GitOps repositories.
</code></pre></div> <ul> <li> <p><a href=https://catalog.redhat.com/software/operators/detail/5ec54a4628834587a6b85ca5>Red at OpenShift Pipelines operator</a>. </p> <ul> <li>There will be no initial setup for a <a href=https://tekton.dev/docs/pipelines/pipelines/ >Tekton pipeline</a> at the moment.</li> </ul> </li> </ul> <p><img alt src=../../../images/SoftwareEverywhere-GitOps.drawio.png></p> <ul> <li><code>IBM Cloud infrastructure</code> with <code>Red Hat OpenShift</code> in a <code>Virtual Private Cloud</code> </li> </ul> <p><img alt src=../../../images/SoftwareEverywhere-OpenShift-Infrastructure.drawio.png></p> <h2 id=2-identify-the-needed-technology-zone-accelerator-toolkit-terraform-modules-for-the-target-architecture>2. Identify the needed <code>Technology Zone Accelerator Toolkit</code> Terraform modules for the target architecture<a class=headerlink href=#2-identify-the-needed-technology-zone-accelerator-toolkit-terraform-modules-for-the-target-architecture title="Permanent link">&para;</a></h2> <p>Let us first define which <code>Technology Zone Accelerator Toolkit</code> Terraform modules we are going to use for our custom <code>BOM</code> file specification. The <a href=https://github.com/cloud-native-toolkit/software-everywhere><code>Technology Zone Accelerator Toolkit</code></a> project points to the <a href=https://github.com/cloud-native-toolkit/automation-solutions>Automated Solutions project</a> which contains several starting points for various setups, which can be used as a starting point.</p> <p>In our case we have two major areas for <code>Terraform</code> modules we want to use:</p> <ol> <li><code>Configuration of GitOps</code></li> <li><code>IBM Cloud infrastructure</code></li> </ol> <h3 id=1-configuration-of-gitops>1. Configuration of GitOps<a class=headerlink href=#1-configuration-of-gitops title="Permanent link">&para;</a></h3> <ul> <li><a href=https://github.com/cloud-native-toolkit/terraform-ocp-login>IBM OpenShift login <code>ocp-login</code></a> - login to existing OpenShift cluster</li> <li><a href=https://github.com/cloud-native-toolkit/terraform-tools-gitops>GitOps repo <code>gitops-repo</code></a> - creates the GitOps Repo</li> <li><a href=https://github.com/cloud-native-toolkit/terraform-tools-gitops>ArgoCD Bootstrap <code>argocd-bootstrap</code></a></li> </ul> <h3 id=2-cloud-infrastructureservices-resources-related>2. Cloud infrastructure/services resources related<a class=headerlink href=#2-cloud-infrastructureservices-resources-related title="Permanent link">&para;</a></h3> <ul> <li><a href=https://github.com/cloud-native-toolkit/terraform-ibm-vpc>IBM VPC <code>ibm-vpc</code></a></li> <li><a href=https://github.com/cloud-native-toolkit/terraform-ibm-vpc-subnets>IBM VPC Subnets <code>ibm-vpc-subnets</code></a></li> <li><a href=https://github.com/cloud-native-toolkit/terraform-ibm-vpc-gateways>IBM Cloud VPC Public Gateway <code>ibm-vpc-gateways</code></a></li> <li><a href=https://github.com/cloud-native-toolkit/terraform-ibm-ocp-vpc>IBM OpenShift VPC cluster <code>ibm-ocp-vpc</code></a></li> <li><a href=https://github.com/cloud-native-toolkit/terraform-ibm-object-storage>IBM Object Storage <code>ibm-object-storage</code></a></li> </ul> <h2 id=3-write-a-customized-bom-to-combine-the-modules>3. Write a customized <code>BOM</code> to combine the modules<a class=headerlink href=#3-write-a-customized-bom-to-combine-the-modules title="Permanent link">&para;</a></h2> <h3 id=step-1-write-the-bill-of-material-bom-file>Step 1: Write the <strong>Bill of Material</strong> <code>BOM</code> file<a class=headerlink href=#step-1-write-the-bill-of-material-bom-file title="Permanent link">&para;</a></h3> <p>Now we combine the existing <code>Terraform</code> modules we got from the <code>Technology Zone Accelerator Toolkit catalog</code> and we specify the variables in the <code>BOM</code> file we need to reflect our target architecture.</p> <blockquote> <p>Note: When we going to use these variables, we must keep in mind that we need to use the names of the variables defined in the <code>Terraform modules</code> and we should use <code>alias: ibm-vpc</code> to define the prefix in the <code>BOM</code> file.</p> </blockquote> <p>The <a href=https://github.com/thomassuedbroecker/iascable-vpc-openshift-argocd/blob/main/example/my-vpc-roks-argocd-bom.yaml><code>BOM</code> file</a> for our architecture is divided in 3 main sections.</p> <ul> <li>Virtual Private Cloud</li> <li>Red Hat OpenShift Cluster (ROKS)</li> <li>GitOps</li> </ul> <p>We need to create an <a href="https://www.ibm.com/docs/en/app-connect/containers_cd?topic=servers-creating-cloud-api-key">IBM Cloud API key</a> and an <a href=https://docs.github.com/en/enterprise-server@3.4/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token>Personal Access Token for the GitHub account</a>.</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cloudnativetoolkit.dev/v1alpha1</span><span class=w></span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">BillOfMaterial</span><span class=w></span>
<span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">my-ibm-vpc-roks-argocd</span><span class=w></span>
<span class=nt>spec</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>modules</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=c1># Virtual Private Cloud - related</span><span class=w></span>
<span class=w>    </span><span class=c1># - subnets</span><span class=w></span>
<span class=w>    </span><span class=c1># - gateways</span><span class=w></span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibm-vpc</span><span class=w></span>
<span class=w>      </span><span class=nt>alias</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibm-vpc</span><span class=w></span>
<span class=w>      </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1.16.0</span><span class=w></span>
<span class=w>      </span><span class=nt>variables</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">name</span><span class=w></span>
<span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;tsued-gitops-sample&quot;</span><span class=w></span>
<span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tags</span><span class=w></span>
<span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;tsuedro&quot;</span><span class="p p-Indicator">]</span><span class=w></span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibm-vpc-subnets</span><span class=w></span>
<span class=w>      </span><span class=nt>alias</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibm-vpc-subnets</span><span class=w></span>
<span class=w>      </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1.13.2</span><span class=w></span>
<span class=w>      </span><span class=nt>variables</span><span class=p>:</span><span class=w></span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">_count</span><span class=w></span>
<span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class=w></span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">name</span><span class=w></span>
<span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;tsued-gitops-sample&quot;</span><span class=w></span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tags</span><span class=w></span>
<span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;tsuedro&quot;</span><span class="p p-Indicator">]</span><span class=w></span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibm-vpc-gateways</span><span class=w></span>
<span class=w>    </span><span class=c1># ROKS - related</span><span class=w></span>
<span class=w>    </span><span class=c1># - objectstorage</span><span class=w></span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibm-ocp-vpc</span><span class=w></span>
<span class=w>      </span><span class=nt>alias</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibm-ocp-vpc</span><span class=w></span>
<span class=w>      </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1.15.5</span><span class=w></span>
<span class=w>      </span><span class=nt>variables</span><span class=p>:</span><span class=w></span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">name</span><span class=w></span>
<span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;tsued-gitops&quot;</span><span class=w></span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">worker_count</span><span class=w></span>
<span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class=w></span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tags</span><span class=w></span>
<span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;tsuedro&quot;</span><span class="p p-Indicator">]</span><span class=w></span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibm-object-storage</span><span class=w></span>
<span class=w>      </span><span class=nt>alias</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibm-object-storage</span><span class=w></span>
<span class=w>      </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v4.0.3</span><span class=w></span>
<span class=w>      </span><span class=nt>variables</span><span class=p>:</span><span class=w></span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">name</span><span class=w></span>
<span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;cos_tsued_gitops&quot;</span><span class=w></span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tags</span><span class=w></span>
<span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;tsuedro&quot;</span><span class="p p-Indicator">]</span><span class=w></span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">label</span><span class=w></span>
<span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;cos_tsued&quot;</span><span class="p p-Indicator">]</span><span class=w></span>
<span class=w>    </span><span class=c1># Install OpenShift GitOps and Bootstrap GitOps (aka. ArgoCD) - related</span><span class=w></span>
<span class=w>    </span><span class=c1># - argocd</span><span class=w></span>
<span class=w>    </span><span class=c1># - gitops</span><span class=w></span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">argocd-bootstrap</span><span class=w></span>
<span class=w>      </span><span class=nt>alias</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">argocd-bootstrap</span><span class=w></span>
<span class=w>      </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1.12.0</span><span class=w></span>
<span class=w>      </span><span class=nt>variables</span><span class=p>:</span><span class=w></span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">repo_token</span><span class=w></span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gitops-repo</span><span class=w></span>
<span class=w>      </span><span class=nt>alias</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gitops-repo</span><span class=w></span>
<span class=w>      </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1.20.2</span><span class=w></span>
<span class=w>      </span><span class=nt>variables</span><span class=p>:</span><span class=w></span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">host</span><span class=w></span>
<span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;github.com&quot;</span><span class=w></span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">type</span><span class=w></span>
<span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;GIT&quot;</span><span class=w></span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">org</span><span class=w></span>
<span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;thomassuedbroecker&quot;</span><span class=w></span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">username</span><span class=w></span>
<span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;thomassuedbroecker&quot;</span><span class=w></span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">project</span><span class=w></span>
<span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;iascable-gitops&quot;</span><span class=w></span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">repo</span><span class=w></span>
<span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;iascable-gitops&quot;</span><span class=w></span>
</code></pre></div> <p>The <code>BOM</code> will result later in following overall dependencies for the used<code>Terraformmodules</code> after the usage of <code>IasCable</code>. The dependencies are given in automatic created<code>dependencies.dot</code>file later. </p> <p><img alt src=../../../images/dependency-graph-lab3.png></p> <blockquote> <p>Note: You can use <a href=https://dreampuf.github.io/GraphvizOnline>GraphvizOnline</a> for the visualization.</p> </blockquote> <h2 id=4-use-iascable-to-create-the-scaffolding-for-a-terraform-project>4. Use <code>IasCable</code> to create the scaffolding for a <code>Terraform</code> project<a class=headerlink href=#4-use-iascable-to-create-the-scaffolding-for-a-terraform-project title="Permanent link">&para;</a></h2> <h3 id=step-1-install-colima-container-engine-and-start-the-container-engine>Step 1: Install <a href=https://github.com/abiosoft/colima>colima</a> container engine and start the container engine<a class=headerlink href=#step-1-install-colima-container-engine-and-start-the-container-engine title="Permanent link">&para;</a></h3> <p>Example for an installation of <a href=https://github.com/abiosoft/colima>colima</a> on macOS.</p> <div class=highlight><pre><span></span><code>brew install docker colima
colima start
</code></pre></div> <h3 id=step-2-create-a-terraform-project-based-on-bill-of-material-bom-file>Step 2: Create a <code>terraform project</code> based on Bill of Material <code>BOM</code> file<a class=headerlink href=#step-2-create-a-terraform-project-based-on-bill-of-material-bom-file title="Permanent link">&para;</a></h3> <ul> <li><strong>Version</strong></li> </ul> <div class=highlight><pre><span></span><code>iascable --version
</code></pre></div> <ul> <li>Output:</li> </ul> <div class=highlight><pre><span></span><code><span class=m>2</span>.14.1
</code></pre></div> <ul> <li><strong>Build</strong></li> </ul> <div class=highlight><pre><span></span><code>iascable build -i my-vpc-roks-argocd-bom.yaml
</code></pre></div> <ul> <li>Output:</li> </ul> <div class=highlight><pre><span></span><code>Loading catalog from url: https://modules.cloudnativetoolkit.dev/index.yaml
Name: my-ibm-vpc-roks-argocd
Writing output to: ./output
</code></pre></div> <h3 id=step-3-copy-helper-bash-scripts-into-the-output-folder>Step 3: Copy helper bash scripts into the output folder<a class=headerlink href=#step-3-copy-helper-bash-scripts-into-the-output-folder title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code>cp helper-tools-create-container-workspace.sh ./output
cp helper-tools-execute-apply-and-backup-result.sh ./output
cp helper-tools-execute-destroy-and-delete-backup.sh ./output
</code></pre></div> <h3 id=step-4-start-the-tools-container-provided-by-the-iascable>Step 4: Start the tools container provided by the <code>IasCable</code><a class=headerlink href=#step-4-start-the-tools-container-provided-by-the-iascable title="Permanent link">&para;</a></h3> <blockquote> <p>Note: At the moment we need to change and save the <code>launch.sh</code> script a bit.</p> </blockquote> <ol> <li>Open the <code>launch.sh</code> script.</li> </ol> <div class=highlight><pre><span></span><code><span class=nb>cd</span> output
nano launch.sh
</code></pre></div> <ol> <li> <p>Delete the <code>-u "${UID}"</code> parameter</p> </li> <li> <p>Before</p> </li> </ol> <div class=highlight><pre><span></span><code><span class=si>${</span><span class=nv>DOCKER_CMD</span><span class=si>}</span> run -itd --name <span class=si>${</span><span class=nv>CONTAINER_NAME</span><span class=si>}</span>    -u <span class=s2>&quot;</span><span class=si>${</span><span class=nv>UID</span><span class=si>}</span><span class=s2>&quot;</span>    -v <span class=s2>&quot;</span><span class=si>${</span><span class=nv>SRC_DIR</span><span class=si>}</span><span class=s2>:/terraform&quot;</span>    -v <span class=s2>&quot;workspace-</span><span class=si>${</span><span class=nv>AUTOMATION_BASE</span><span class=si>}</span><span class=s2>:/workspaces&quot;</span>    <span class=si>${</span><span class=nv>ENV_FILE</span><span class=si>}</span>    -w /terraform    <span class=si>${</span><span class=nv>DOCKER_IMAGE</span><span class=si>}</span>
</code></pre></div> <ul> <li>After the change</li> </ul> <div class=highlight><pre><span></span><code><span class=si>${</span><span class=nv>DOCKER_CMD</span><span class=si>}</span> run -itd --name <span class=si>${</span><span class=nv>CONTAINER_NAME</span><span class=si>}</span> -v <span class=s2>&quot;</span><span class=si>${</span><span class=nv>SRC_DIR</span><span class=si>}</span><span class=s2>:/terraform&quot;</span>    -v <span class=s2>&quot;workspace-</span><span class=si>${</span><span class=nv>AUTOMATION_BASE</span><span class=si>}</span><span class=s2>:/workspaces&quot;</span>    <span class=si>${</span><span class=nv>ENV_FILE</span><span class=si>}</span>    -w /terraform    <span class=si>${</span><span class=nv>DOCKER_IMAGE</span><span class=si>}</span>
</code></pre></div> <ol> <li>Execute the <code>launch.sh</code> script</li> </ol> <div class=highlight><pre><span></span><code>sh launch.sh
</code></pre></div> <h2 id=5-use-the-iascable-tools-container-to-execute-the-terraform-modules>5. Use the <code>IasCable</code> tools container to execute the <code>Terraform</code> modules<a class=headerlink href=#5-use-the-iascable-tools-container-to-execute-the-terraform-modules title="Permanent link">&para;</a></h2> <h3 id=step-1-inside-the-container-in-the-running-container-verify-the-mapped-resources>Step 1 (inside the container): In the running container verify the mapped resources<a class=headerlink href=#step-1-inside-the-container-in-the-running-container-verify-the-mapped-resources title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code>~/src $ ls
helper-tools-create-container-workspace.sh
helper-tools-execute-apply-and-backup-result.sh
helper-tools-execute-destroy-and-delete-backup.sh
launch.sh
my-ibm-vpc-roks-argocd
</code></pre></div> <h3 id=step-2-inside-the-container-create-a-workspace-folder-in-your-container-and-copy-your-iascable-project-into-it>Step 2 (inside the container): Create a workspace folder in your container and copy your <code>IasCable</code> project into it<a class=headerlink href=#step-2-inside-the-container-create-a-workspace-folder-in-your-container-and-copy-your-iascable-project-into-it title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code>sh helper-tools-create-container-workspace.sh
ls /home/devops/workspace
</code></pre></div> <p>The following tasks are automated in the helper bash script <a href=https://github.com/thomassuedbroecker/iascable-vpc-openshift-argocd/blob/main/example/helper-tools-create-container-workspace.sh><code>helper-tools-create-container-workspace.sh</code></a> I wrote.</p> <ol> <li>Creates a <code>workspace</code> folder</li> <li> <p>Copies the <code>Terraform project</code> from the mapped volume folder to the workspace folder</p> </li> <li> <p>Output:</p> </li> </ol> <p>You can see the copied <code>Terraform project</code> folder inside the container.</p> <div class=highlight><pre><span></span><code>my-ibm-vpc-roks-argocd
</code></pre></div> <h2 id=6-apply-the-terraform-modules-to-create-the-environment-in-ibm-cloud-and-backup-terraform-configuration>6. Apply the Terraform modules to create the environment in IBM Cloud and backup Terraform configuration<a class=headerlink href=#6-apply-the-terraform-modules-to-create-the-environment-in-ibm-cloud-and-backup-terraform-configuration title="Permanent link">&para;</a></h2> <h3 id=step-1-inside-the-container-execute-the-applysh-and-backup-the-result-into-the-mapped-volume>Step 1 (inside the container): Execute the <code>apply.sh</code> and backup the result into the mapped volume<a class=headerlink href=#step-1-inside-the-container-execute-the-applysh-and-backup-the-result-into-the-mapped-volume title="Permanent link">&para;</a></h3> <p>All these tasks are automated in the helper bash script I wrote.</p> <div class=highlight><pre><span></span><code>sh helper-tools-execute-apply-and-backup-result.sh
</code></pre></div> <ul> <li> <p>The script <a href=https://github.com/thomassuedbroecker/iascable-vpc-openshift-argocd/blob/main/example/helper-tools-execute-apply-and-backup-result.sh>helper-tools-execute-apply-and-backup-result.sh</a> does following:</p> </li> <li> <p>Navigate to the created workspace</p> </li> <li>Execute <code>apply.sh</code> script</li> <li>List the created resources</li> <li> <p>Copy current start to mapped volume</p> </li> <li> <p>Interactive output:</p> </li> </ul> <p>As we see in the output the values we inserted in our custom <code>BOM</code> file are now used as the default values.</p> <p>In our example we only need to insert the values for:</p> <ul> <li>gitops-repo_token</li> <li>ibmcloud_api_key</li> <li>resource_group_name</li> <li>region</li> </ul> <div class=highlight><pre><span></span><code>Variables can be provided <span class=k>in</span> a yaml file passed as the first argument

Provide a value <span class=k>for</span> <span class=s1>&#39;gitops-repo_host&#39;</span>:
  The host <span class=k>for</span> the git repository. The git host used can be a GitHub, GitHub Enterprise, Gitlab, Bitbucket, Gitea or Azure DevOps server. If the host is null assumes <span class=k>in</span>-cluster Gitea instance will be used.
&gt; <span class=o>(</span>github.com<span class=o>)</span> 
Provide a value <span class=k>for</span> <span class=s1>&#39;gitops-repo_org&#39;</span>:
  The org/group where the git repository exists/will be provisioned. If the value is left blank <span class=k>then</span> the username org will be used.
&gt; <span class=o>(</span>thomassuedbroecker<span class=o>)</span> 
Provide a value <span class=k>for</span> <span class=s1>&#39;gitops-repo_project&#39;</span>:
  The project that will be used <span class=k>for</span> the git repo. <span class=o>(</span>Primarily used <span class=k>for</span> Azure DevOps repos<span class=o>)</span>
&gt; <span class=o>(</span>iascable-gitops<span class=o>)</span>
Provide a value <span class=k>for</span> <span class=s1>&#39;gitops-repo_username&#39;</span>:
  The username of the user with access to the repository
&gt; <span class=o>(</span>thomassuedbroecker<span class=o>)</span> 
Provide a value <span class=k>for</span> <span class=s1>&#39;gitops-repo_token&#39;</span>:
  The personal access token used to access the repository
&gt; XXX
&gt; Provide a value <span class=k>for</span> <span class=s1>&#39;ibmcloud_api_key&#39;</span>:
&gt; XXX
Provide a value <span class=k>for</span> <span class=s1>&#39;region&#39;</span>:
&gt; eu-de
Provide a value <span class=k>for</span> <span class=s1>&#39;worker_count&#39;</span>:
  The number of worker nodes that should be provisioned <span class=k>for</span> classic infrastructure
&gt; <span class=o>(</span><span class=m>2</span><span class=o>)</span>
Provide a value <span class=k>for</span> <span class=s1>&#39;ibm-ocp-vpc_flavor&#39;</span>:
  The machine <span class=nb>type</span> that will be provisioned <span class=k>for</span> classic infrastructure
&gt; <span class=o>(</span>bx2.4x16<span class=o>)</span> 
Provide a value <span class=k>for</span> <span class=s1>&#39;ibm-vpc-subnets__count&#39;</span>:
  The number of subnets that should be provisioned
&gt; <span class=o>(</span><span class=m>1</span><span class=o>)</span> 
Provide a value <span class=k>for</span> <span class=s1>&#39;resource_group_name&#39;</span>:
  The name of the resource group
&gt; default
</code></pre></div> <ul> <li>Output:</li> </ul> <p>Move on with the setup and apply Terraform.</p> <div class=highlight><pre><span></span><code>Do you want to perform these actions?
  Terraform will perform the actions described above.
  Only <span class=s1>&#39;yes&#39;</span> will be accepted to approve.

  Enter a value: yes
</code></pre></div> <p>After a while you should get following output.</p> <div class=highlight><pre><span></span><code>Apply complete! Resources: <span class=m>91</span> added, <span class=m>0</span> changed, <span class=m>0</span> destroyed.
</code></pre></div> <ul> <li> <p>Major resources which were created:</p> </li> <li> <p>Cloud infrastructure/services resources</p> <ul> <li>1 x VPC <img alt src=../../../images/resources-02-vpc.png></li> <li>1 x Subnet <img alt src=../../../images/resources-03-subnet.png></li> <li>4 Security groups Two were created during the subnet creation and two are related to the created Red Hat OpenShift cluster. <img alt src=../../../images/resources-04-security-groups.png></li> <li>1 x Virtual Private Endpoint <img alt src=../../../images/resources-05-virtual-private-endpoint.png></li> <li>1 x Public Gateway <img alt src=../../../images/resources-06-public-gateway.png></li> <li>2 x Access Control Lists One was created for the VPC module and one during the creation by the subnet module. <img alt src=../../../images/resources-07-access-control-list.png></li> <li>1 x Routing Table <img alt src=../../../images/resources-08-routing-table.png></li> <li>1 x Red Hat OpenShift Cluster <img alt src=../../../images/resources-09-openshift-cluster.png></li> <li>1 x Object Storage <img alt src=../../../images/resources-10-object-storage.png></li> </ul> </li> <li> <p>Cluster and GitOps configuration</p> <ul> <li><code>Red Hat OpenShift GitOps</code> operator and <code>Red Hat OpenShift Pipelines</code> operator <img alt src=../../../images/cluster-configuration-01-operators.png></li> <li><code>GitHub</code> project as ArgoCD repository <img alt src=../../../images/cluster-configuration-02-github-project.png></li> <li>Preconfigure ArgoCD project <img alt src=../../../images/cluster-configuration-03-argocd-project.png></li> </ul> </li> </ul> <p>The invoked <code>apply.sh</code> script will create following files or folders:</p> <ul> <li> <p>Inside the tools container:</p> </li> <li> <p>a temporary <code>workspace/my-ibm-vpc-roks-argocd/variables.yaml.tmp</code> file</p> </li> <li>a <code>workspace/my-ibm-vpc-roks-argocd/variables.yaml</code> file</li> <li>a <code>workspace/my-ibm-vpc-roks-argocd/terraform/variables.tf</code> file</li> <li>a <code>workspace/my-ibm-vpc-roks-argocd/terraform/variables.tfvars</code> file</li> <li>several folders <code>.kube</code>, <code>.terraform</code>, <code>.tmp</code>, <code>bin2</code>, <code>docs</code></li> <li>Then it creates a <code>terraform.tfvars</code> file based on the entries you gave and executes init and apply command from Terraform.</li> </ul> <blockquote> <p>Be aware that the <code>IBM Cloud access key information and GitHub access token</code> are saved in text format in the <code>output/my-ibm-vpc-roks-argocd/terraform/terraform.tfvars</code> file! <strong>Don't share this in a public GitHub repository.</strong></p> </blockquote> <ul> <li> <p>On GitHub</p> </li> <li> <p>it creates a GitHub private project which contains preconfigure ArgoCD resource provided by <code>cloud native toolkit</code></p> </li> </ul> <blockquote> <p>Note: Here you can sample of the content of an example for a generated variables.yaml file <a href=/overview-variables.md>link</a> and here you can find an example for the created <a href=/example/example-auto-created-bom-file.yaml>BOM file</a>.</p> </blockquote> <h2 id=7-destroy-the-environment-on-ibm-cloud>7. Destroy the environment on IBM Cloud<a class=headerlink href=#7-destroy-the-environment-on-ibm-cloud title="Permanent link">&para;</a></h2> <h3 id=step-1-inside-the-container-destroy-the-created-ibm-cloud-resources>Step 1 (inside the container): Destroy the created IBM Cloud resources<a class=headerlink href=#step-1-inside-the-container-destroy-the-created-ibm-cloud-resources title="Permanent link">&para;</a></h3> <p>All these tasks are automated in the helper bash script I wrote.</p> <blockquote> <p>Note: Ensure you didn't delete created <code>Terraform</code> files before.</p> </blockquote> <p><div class=highlight><pre><span></span><code>sh helper-tools-execute-destroy-and-delete-backup.sh
</code></pre></div> * The script <a href=https://github.com/thomassuedbroecker/iascable-vpc-openshift-argocd/blob/main/example/helper-tools-execute-destroy-and-delete-backup.sh>helper-tools-execute-destroy-and-delete-backup.sh</a> does following:</p> <ol> <li>Navigate to workspace</li> <li>Execute destroy.sh</li> <li>Navigate to the mapped volume</li> <li> <p>Copy the current state to the mapped volume</p> </li> <li> <p>Output:</p> </li> </ol> <blockquote> <p>Note: It also deleted the automated created private GitHub project.</p> </blockquote> <div class=highlight><pre><span></span><code>Destroy complete! Resources: <span class=m>91</span> destroyed.
</code></pre></div> <h2 id=8-summary>8. Summary<a class=headerlink href=#8-summary title="Permanent link">&para;</a></h2> <p>We achieved what we wanted to achieve, create a customized initial setup in an <a href=https://cloud.ibm.com/login><code>IBM Cloud</code></a> environment for <a href=https://www.ibm.com/garage/method/practices/run/gitops/ >GitOps</a>. </p> <p>The <a href=https://github.com/cloud-native-toolkit/software-everywhere><code>Technology Zone Accelerator Toolkit</code></a> project and <a href=https://github.com/cloud-native-toolkit/iascable><code>IasCable</code></a> are powerful.</p> <blockquote> <p>As we have seen there was no need to write any Terraform module!</p> </blockquote> <p>Yes, when you are going to define you own "Bill of Material <code>BOM</code> file" you need to get familiar with the related modules related to your target architecture, when you want to customize it to your needs. </p> <p>But, as I said: There was no need to write own Terraform modules in our case.</p> <p>The <a href=https://github.com/cloud-native-toolkit/software-everywhere><code>Technology Zone Accelerator Toolkit</code></a> project and <a href=https://github.com/cloud-native-toolkit/iascable><code>IasCable</code></a> project needs some more documentation in the future, I like the power of it and it is under <a href=https://github.com/cloud-native-toolkit/software-everywhere/blob/main/LICENSE>Apache-2.0 license</a>, which means you can use it as your starting point for Technology Zone Accelerator Toolkit with Terraform and contribute to the project.</p> </article> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> </div> </div> </main> <!-- Footer --> <footer class=md-footer> <!-- Further information --> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-column> <div class=md-footer-text><a href=https://modules.cloudnativetoolkit.dev/#/contributing>Contribute</a> to the TechZone Automation</div> <div class=md-footer-text>Site licensed under <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ >CC BY-NC-SA 4.0</a></div> </div> <div class=md-footer-column> <div class=md-footer-text>Have questions? open an issue on <a href=https://github.com/cloud-native-toolkit/planning/issues/new/choose>GitHub</a>.</div> <!-- Copyright and theme information --> <div class=md-footer-text> Copyright  2022 TechZone Automation </div> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.instant", "navigation.tracking", "content.tabs.link"], "search": "../../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.9c69f0bc.min.js></script> </body> </html>